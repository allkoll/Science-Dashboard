<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Science Dashboard</h1>
        <p class="lead">Displaying data from the Science Dashboard as interactive charts.</p>
        
        <!-- Placeholder for Graphs -->
        <div id="chart1" class="mt-3"></div>
        <div id="chart2" class="mt-3"></div>
    </div>

    <script>
        // Updated JSON data with course lists for hover information
        const jsonData = [
            {
                "school": "Ben Franklin MS",
                "implementedCourses": 3,
                "totalCourses": 3,
                "percentage": 100,
                "courseList": "Science 6, Life Science, Earth Science"
            },
            {
                "school": "CBE MS",
                "implementedCourses": 3,
                "totalCourses": 3,
                "percentage": 100,
                "courseList": "Science 6, Life Science, Earth Science"
            },
            {
                "school": "Discovery MS",
                "implementedCourses": 3,
                "totalCourses": 3,
                "percentage": 100,
                "courseList": "Science 6, Life Science, Earth Science"
            },
            {
                "school": "North HS",
                "implementedCourses": 2,
                "totalCourses": 11,
                "percentage": 18,
                "courseList": "Physical Science, Environmental Science"
            },
            {
                "school": "South HS",
                "implementedCourses": 2,
                "totalCourses": 10,
                "percentage": 20,
                "courseList": "Physical Science, Environmental Science"
            },
            {
                "school": "Davies HS",
                "implementedCourses": 10,
                "totalCourses": 11,
                "percentage": 90,
                "courseList": "Physical Science, Biology, Environmental Science, Forensics, Chemistry, Physics, Anatomy, AP Biology, AP Physics 1, AP Physics Mechanics"
            }
        ];

        // Extract data for the first chart (EBR Implementation Percentages)
        const schools = jsonData.map(row => row.school);
        const percentages = jsonData.map(row => row.percentage);

        // Create a bar chart for EBR Implementation Percentage
        const chart1Data = [{
            x: schools,
            y: percentages,
            type: 'bar',
            marker: { color: 'blue' }
        }];

        const chart1Layout = {
            title: 'EBR Implementation Percentages by School',
            xaxis: { title: 'School' },
            yaxis: { title: 'Implementation Percentage' }
        };

        Plotly.newPlot('chart1', chart1Data, chart1Layout);

        // Create a grouped bar chart for Implemented vs. Total Courses
        const implementedCourses = jsonData.map(row => row.implementedCourses);
        const totalCourses = jsonData.map(row => row.totalCourses);
        const courseLists = jsonData.map(row => row.courseList);

        const chart2Data = [
            {
                x: schools,
                y: implementedCourses,
                name: 'Implemented Courses',
                type: 'bar',
                marker: { color: 'green' },
                text: courseLists,  // Adding the course list for hover
                hoverinfo: 'text',  // Show only the text on hover
                hovertext: courseLists  // Custom hover text
            },
            {
                x: schools,
                y: totalCourses,
                name: 'Total Courses',
                type: 'bar',
                marker: { color: 'orange' }
            }
        ];

        const chart2Layout = {
            title: 'Implemented vs. Total Courses by School',
            xaxis: { title: 'School' },
            yaxis: { title: 'Number of Courses' },
            barmode: 'group'
        };

        Plotly.newPlot('chart2', chart2Data, chart2Layout);

    </script>
</body>
</html>
